<div class="body">
  <div class="container">
    <div class="col content">
      <img src="assets/logo-clean-flower.jpg" alt="Logo" >
    </div>
  </div>


  
  <div class="container filtros">
    <div class="d-flex justify-content-between align-items-center" style="border-bottom: 1px solid #ccc; padding: 15px;">
      <h5 style="font-size: 25px; margin: 0;">Filtros</h5>
      <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#filtrosCollapse" aria-expanded="false" aria-controls="filtrosCollapse">
        <i class="fa fa-bars" style="font-size: 20px;"></i>
      </button>
    </div>
    <div class="collapse" id="filtrosCollapse">
      <div class="row align-items-end" style="padding: 15px;">
        <div class="col-4">
          <div class="mb-3">
            <label class="form-label">Nombre</label>
            <input type="text" class="form-control" placeholder="Nombre..." [(ngModel)]="nombreFiltro">
          </div>
        </div>
        <div class="col-4">
          <div class="mb-3">
            <label class="form-label">Código de producto</label>
            <input type="text" class="form-control" placeholder="Código producto..." [(ngModel)]="codigoFiltro">
          </div>
        </div>
        <div class="col-4 d-flex justify-content-end">
          <button type="button" class="btn btn-primary" (click)="aplicarFiltro()">
            <i class="fa-solid fa-magnifying-glass"></i>
            Buscar
          </button>
        </div>
      </div>
    </div>
  </div>
  
  
  
 
  <div class="container tabla-productos">
    <div class="col">
      <h5 style="font-size: 25px; border-bottom: 1px solid #ccc; padding-top: 15px;">Productos</h5>
    </div>
    <div class="col text-end">
      <button class="btn btn-success me-2 " style="margin-top: 20px;" (click)="redirectToCrear()">
        <i class="fa-solid fa-plus"></i> Nuevo
      </button>

      <button class="btn btn-success float-end" style="margin-top: 20px;" (click)="openDialogVenta('1500ms', '0ms')" [disabled]="modalAbierto">
        <i class="fa-solid fa-shopping-cart"></i> Carrito
      </button>
    </div>
    <div class="row mt-3">
      <div class="table-responsive">
        <table class="table table-custom-striped border">
          <table mat-table [dataSource]="productos" class="mat-elevation-z8 demo-table">
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef>ID</th>
              <td mat-cell *matCellDef="let element">{{element?.id}}</td>
            </ng-container>
          
            <ng-container matColumnDef="descripcion">
              <th mat-header-cell *matHeaderCellDef>Descripcion</th>
              <td mat-cell *matCellDef="let element">{{element?.descripcion}}</td>
            </ng-container>
          
          
            <ng-container matColumnDef="codigo">
              <th mat-header-cell *matHeaderCellDef>Codigo</th>
              <td mat-cell *matCellDef="let element">{{element?.codigo}}</td>
            </ng-container>
          
            <ng-container matColumnDef="stock">
              <th mat-header-cell *matHeaderCellDef>Stock</th>
              <td mat-cell *matCellDef="let element">{{element?.cantidad}}</td>
            </ng-container>
        
          
            <ng-container matColumnDef="precioCosto">
              <th mat-header-cell *matHeaderCellDef>Precio costo</th>
              <td mat-cell *matCellDef="let element">{{element?.precioCosto}}</td>
            </ng-container>

            <ng-container matColumnDef="precioVenta">
              <th mat-header-cell *matHeaderCellDef>Precio venta</th>
              <td mat-cell *matCellDef="let element">{{element?.precioVenta}}</td>
            </ng-container>
          
            <ng-container matColumnDef="editar">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let element">
                <button type="button" class="btn btn-primary" (click)="editarProducto(element.id)">
                  <i class="fa-solid fa-pen-to-square"></i>
                </button>
              </td>
            </ng-container>
          
            <ng-container matColumnDef="borrar">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let element">
                <button mat-button mat-raised-button  (click)="openDialog(element.id,'1500ms', '0ms')" type="button" class="btn btn-danger" [disabled]="modalAbierto">
                  <i class="fa-solid fa-trash"></i>
                </button>
              </td>
            </ng-container>

            <ng-container matColumnDef="sumarCarrito">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let element">
                <button mat-button mat-raised-button  type="button" class="btn btn-success" (click)="sumarCarrito(element, 1)">
                  <i class="fa-solid fa-plus"></i>
                </button>
              </td>
            </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr
                mat-row
                (click)="clickedRows.add(row)"
                [class.demo-row-is-clicked]="clickedRows.has(row)"
                *matRowDef="let row; columns: displayedColumns;"
            ></tr>
          </table>
          <div *ngIf="productos.length === 0" class="alert alert-danger d-flex justify-content-center align-items-center" role="alert">
            <p>No existen resultados de productos.</p>
          </div>   
        </table>
        <mat-paginator [length]="this.totalRegistros"
              [pageSize]="this.registrosPorPagina"
              [pageSizeOptions]="[ 5, 10, 50, 100]"
              (page)="onPageChange($event)">
        </mat-paginator> 
      </div>
    </div>
  </div>
</div>